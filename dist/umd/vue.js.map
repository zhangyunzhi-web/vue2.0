{"version":3,"file":"vue.js","sources":["../../src/observer/index.js","../../src/state.js","../../src/init.js","../../src/index.js"],"sourcesContent":["\r\nclass Observer{\r\n    constructor(value){\r\n        //使用defineProperty 重新定义属性\r\n        this.walk(value);\r\n    }\r\n    walk(data){\r\n        let keys=Object.keys(data); //获取对象的key\r\n        keys.forEach(key => {\r\n            defineReactive(data,key,data[key]);  //Vue.util.defineReactive\r\n        });\r\n    }\r\n}\r\nfunction defineReactive(data,key,value){\r\n    observer(value)   //如果值是对象类型在进行观测\r\n    Object.defineProperty(data,key,{\r\n        get(){\r\n            // console.log('用户获取值了',data,key,value);\r\n            return value\r\n        },\r\n        set(newValue){\r\n            // console.log('用户设定值了',data,key,value)\r\n            if(newValue==value) return;\r\n            observer(newValue)  //如果用户将值改为对象继续监控\r\n            value = newValue\r\n        }\r\n    })\r\n}\r\nexport function observer(data) {\r\n    //typeof null 也是对象\r\n    // 不能不是对象 并且不是null才能监控\r\n    if(typeof data !== 'object' || data == null){\r\n        return;\r\n    }\r\n    // console.log(data)\r\n    return new Observer(data)\r\n}","//初始化状态的某个属性的扩展\r\n\r\nimport {\r\n    observer\r\n} from \"./observer/index.js\";\r\n\r\n\r\nexport function initState(vm) { //vm.$options\r\n    // console.log(vm)\r\n    const opts = vm.$options;\r\n    if (opts.props) {\r\n        initProps(vm);\r\n    }\r\n    if (opts.methods) {\r\n        initMethods(vm);\r\n    }\r\n    if (opts.data) {\r\n        initData(vm);\r\n    }\r\n    if (opts.computed) {\r\n        initComputed(vm);\r\n    }\r\n    if (opts.watch) {\r\n        initWatch(vm);\r\n    }\r\n\r\n}\r\n\r\nfunction initProps() {}\r\n\r\nfunction initMethods() {}\r\n\r\nfunction initData(vm) { //数据的初始化操作\r\n    let data = vm.$options.data\r\n    // console.log(data);\r\n    vm._data = data = typeof data == 'function' ? data.call(vm) : data\r\n    // console.log(data)\r\n\r\n    //数据的劫持方案 对象Object.defineProperty defineProperty可以重新定义get和set方法\r\n    //数组  单独处理的 \r\n    observer(data)\r\n}\r\n\r\nfunction initComputed() {}\r\n\r\nfunction initWatch() {}","//对当前初始化的操作进行初始化\r\n\r\n\r\n\r\nimport {\r\n    initState\r\n} from \"./state\";\r\n\r\nexport function initMixin(Vue) {\r\n    Vue.prototype._init = function (options) {\r\n        // console.log(options)\r\n        const vm = this;\r\n        vm.$options = options;\r\n\r\n\r\n        //初始化状态（将数据做一个初始化的劫持 当我改变数据时应该更新视图）\r\n        // vue组件中有很多状态 data props watch computed\r\n        initState(vm);\r\n        //\r\n\r\n        // vue里面核心特性  响应式数据原理\r\n        // Vue 是一个什么样的框架 MVVM\r\n\r\n        // 数据变化视图会更新，视图变化数据会被影响  (MVVM)不能跳过数据去更新视图,$ref\r\n    }\r\n}","//构造函数的原型上扩展方法\r\n\r\n\r\n//es6的类的写法  一个整体\r\n// class Vue{\r\n\r\nimport { initMixin } from \"./init\";\r\n\r\n//     a(){\r\n\r\n//     }\r\n//     b(){\r\n\r\n//     }\r\n//     c(){\r\n\r\n//     }\r\n// }\r\n\r\nfunction Vue(options){\r\n    // console.log(options)\r\n    this._init(options);//入口方法，做初始化操作\r\n}\r\n\r\n//写成一个个的插件进行对原型的扩展\r\n\r\n//初始化方法\r\n// Vue.prototype._init = function (options) {\r\n\r\n// }\r\ninitMixin(Vue)\r\n\r\nexport default Vue;"],"names":["Observer","value","walk","data","keys","Object","forEach","key","defineReactive","observer","defineProperty","get","set","newValue","initState","vm","opts","$options","props","methods","initData","computed","watch","_data","call","initMixin","Vue","prototype","_init","options"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MACMA;EACF,oBAAYC,KAAZ,EAAkB;EAAA;;EACd;EACA,SAAKC,IAAL,CAAUD,KAAV;EACH;;;;2BACIE,MAAK;EACN,UAAIC,IAAI,GAACC,MAAM,CAACD,IAAP,CAAYD,IAAZ,CAAT,CADM;;EAENC,MAAAA,IAAI,CAACE,OAAL,CAAa,UAAAC,GAAG,EAAI;EAChBC,QAAAA,cAAc,CAACL,IAAD,EAAMI,GAAN,EAAUJ,IAAI,CAACI,GAAD,CAAd,CAAd,CADgB;EAEnB,OAFD;EAGH;;;;;;EAEL,SAASC,cAAT,CAAwBL,IAAxB,EAA6BI,GAA7B,EAAiCN,KAAjC,EAAuC;EACnCQ,EAAAA,QAAQ,CAACR,KAAD,CAAR,CADmC;;EAEnCI,EAAAA,MAAM,CAACK,cAAP,CAAsBP,IAAtB,EAA2BI,GAA3B,EAA+B;EAC3BI,IAAAA,GAD2B,iBACtB;EACD;EACA,aAAOV,KAAP;EACH,KAJ0B;EAK3BW,IAAAA,GAL2B,eAKvBC,QALuB,EAKd;EACT;EACA,UAAGA,QAAQ,IAAEZ,KAAb,EAAoB;EACpBQ,MAAAA,QAAQ,CAACI,QAAD,CAAR,CAHS;;EAITZ,MAAAA,KAAK,GAAGY,QAAR;EACH;EAV0B,GAA/B;EAYH;;EACM,SAASJ,QAAT,CAAkBN,IAAlB,EAAwB;EAC3B;EACA;EACA,MAAG,QAAOA,IAAP,MAAgB,QAAhB,IAA4BA,IAAI,IAAI,IAAvC,EAA4C;EACxC;EACH,GAL0B;;;EAO3B,SAAO,IAAIH,QAAJ,CAAaG,IAAb,CAAP;EACH;;ECpCD;EAOO,SAASW,SAAT,CAAmBC,EAAnB,EAAuB;EAAE;EAC5B;EACA,MAAMC,IAAI,GAAGD,EAAE,CAACE,QAAhB;;EACA,MAAID,IAAI,CAACE,KAAT,EAAgB;;EAGhB,MAAIF,IAAI,CAACG,OAAT,EAAkB;;EAGlB,MAAIH,IAAI,CAACb,IAAT,EAAe;EACXiB,IAAAA,QAAQ,CAACL,EAAD,CAAR;EACH;;EACD,MAAIC,IAAI,CAACK,QAAT,EAAmB;;EAGnB,MAAIL,IAAI,CAACM,KAAT,EAAgB;EAInB;;EAMD,SAASF,QAAT,CAAkBL,EAAlB,EAAsB;EAAE;EACpB,MAAIZ,IAAI,GAAGY,EAAE,CAACE,QAAH,CAAYd,IAAvB,CADkB;;EAGlBY,EAAAA,EAAE,CAACQ,KAAH,GAAWpB,IAAI,GAAG,OAAOA,IAAP,IAAe,UAAf,GAA4BA,IAAI,CAACqB,IAAL,CAAUT,EAAV,CAA5B,GAA4CZ,IAA9D,CAHkB;EAMlB;EACA;;EACAM,EAAAA,QAAQ,CAACN,IAAD,CAAR;EACH;;ECzCD;EAQO,SAASsB,SAAT,CAAmBC,GAAnB,EAAwB;EAC3BA,EAAAA,GAAG,CAACC,SAAJ,CAAcC,KAAd,GAAsB,UAAUC,OAAV,EAAmB;EACrC;EACA,QAAMd,EAAE,GAAG,IAAX;EACAA,IAAAA,EAAE,CAACE,QAAH,GAAcY,OAAd,CAHqC;EAOrC;;EACAf,IAAAA,SAAS,CAACC,EAAD,CAAT,CARqC;EAWrC;EACA;EAEA;EACH,GAfD;EAgBH;;ECzBD;EAUA;EACA;EAEA;EACA;EAEA;EACA;;EAEA,SAASW,GAAT,CAAaG,OAAb,EAAqB;EACjB;EACA,OAAKD,KAAL,CAAWC,OAAX,EAFiB;;EAGpB;EAID;EACA;EAEA;;;EACAJ,SAAS,CAACC,GAAD,CAAT;;;;;;;;"}